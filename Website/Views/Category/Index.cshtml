@using Website.CategorySupport
@using Website.ProductSupport
@using Poetry.UI.AspNet.PageEditingSupport

@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

@model Category

<h1>@Html.PropertyFor(m => m.Name) (<a href="/Admin">Edit</a>)</h1>

<p>Products:</p>

<ul>
    @foreach (var product in DependencyResolver.Current.GetService<IProductRepository>().GetAll().Where(p => p.CategoryId == Model.Id))
    {
        <li><a href="@(DependencyResolver.Current.GetService<IProductUrlProvider>().GetUrl(product))">@product.Name</a></li>
    }
</ul>